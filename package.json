{
  "name": "remote-beyond",
  "displayName": "remote-beyond",
  "description": "Forward non-public remote services to the local interface",
  "publisher": "novemus",
  "version": "0.0.1",
  "icon": "resources/webpier.png",
  "license": "MIT",
  "engines": {
    "vscode": "^1.105.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [

  ],
  "main": "./dist/extension.js",
  "contributes": {
    "configuration": {
      "title": "Remote Beyond",
      "properties": {
        "remoteBeyond.owner": {
          "type": "string",
          "default": "",
          "description": "The Owner identifier (e.g., an email address)."
        },
        "remoteBeyond.pier": {
          "type": "string",
          "default": "",
          "description": "The Pier identifier (must be unique for the Owner)."
        },
        "remoteBeyond.service": {
          "type": "string",
          "default": "ssh",
          "description": "The service type (e.g., ssh)."
        },
        "remoteBeyond.address": {
          "type": "string",
          "default": "127.0.0.1:22",
          "description": "The service address."
        },
        "remoteBeyond.gateway": {
          "type": "string",
          "default": "0.0.0.0:0",
          "description": "The gateway address."
        },
        "remoteBeyond.autostart": {
          "type": "boolean",
          "default": true,
          "description": "Whether to autostart the service."
        },
        "remoteBeyond.obscure": {
          "type": "boolean",
          "default": true,
          "description": "Whether to obscure the service."
        },
        "remoteBeyond.rendezvous": {
          "type": "string",
          "default": "",
          "description": "The rendezvous service."
        },
        "remoteBeyond.externalConfigPath": {
          "type": "string",
          "default": "./remote-beyond-config.json",
          "description": "Path to an external JSON config file (relative to workspace root)."
        }
      }
    },
    "commands": [
      {
        "command": "remoteBeyond.startup",
        "title": "Init workspace context..."
      },
      {
        "command": "remoteBeyond.createOffer",
        "title": "Create an offer..."
      },
      {
        "command": "remoteBeyond.uploadOffer",
        "title": "Upload an offer..."
      },
      {
        "command": "remoteBeyond.startService",
        "title": "Start service",
        "icon": "$(run)"
      },
      {
        "command": "remoteBeyond.stopService",
        "title": "Stop service",
        "icon": "$(stop-circle)"
      },
      {
        "command": "remoteBeyond.addService",
        "title": "Add service",
        "icon": "$(new-file)"
      },
      {
        "command": "remoteBeyond.delService",
        "title": "Delete service",
        "icon": "$(notebook-delete-cell)"
      },
      {
        "command": "remoteBeyond.editService",
        "title": "Edit service",
        "icon": "$(settings-edit)"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "remoteBeyond",
          "title": "Remote Beyond",
          "icon": "resources/mono.png"
        }
      ]
    },
    "views": {
      "remoteBeyond": [
        {
          "id": "webpierStartup",
          "name": "Startup",
          "icon": "ports-open-browser-icon",
          "when": "!context.initialized"
        },
        {
          "id": "webpierImport",
          "name": "Import",
          "icon": "ports-open-browser-icon",
          "when": "context.initialized"
        },
        {
          "id": "webpierExport",
          "name": "Export",
          "icon": "ports-open-browser-icon",
          "when": "context.initialized"
        },
        {
					"type": "webview",
					"id": "webpierEditor",
					"name": "Details",
          "when": "context.editor"
				}
      ]
    },
    "menus": {
      "view/title": [
        {
          "command": "remoteBeyond.createOffer",
          "when": "view == webpierExport"
        },
        {
          "command": "remoteBeyond.uploadOffer",
          "when": "view == webpierImport"
        },
        {
          "command": "remoteBeyond.addService",
          "when": "view == webpierImport || view == webpierExport",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "remoteBeyond.startService",
          "when": "viewItem === 'webpier.asleep.service'",
          "group": "inline"
        },
        {
          "command": "remoteBeyond.stopService",
          "when": "viewItem === 'webpier.active.service'",
          "group": "inline"
        },
        {
          "command": "remoteBeyond.editService",
          "when": "viewItem === 'webpier.active.service' || viewItem === 'webpier.asleep.service'",
          "group": "inline"
        },
        {
          "command": "remoteBeyond.delService",
          "when": "viewItem === 'webpier.active.service' || viewItem === 'webpier.asleep.service'",
          "group": "inline"
        }
      ]
    },
    "viewsWelcome": [
			{
				"view": "webpierStartup",
				"contents": "To get started you need to install [WebPier](https://github.com/novemus/webpier/releases/latest) application and define the webpier identity wich consists from the Owner and Pier identifiers. The Owner name should be an email address, if you want to use Email as the rendezvous in addition to DHT network, and the Pier name must be unique for the Owner. Then you can setup preferred rendezvous service and define a STUN server in the extension setting.\n[Init WebPier Context](command:remoteBeyond.startup)"
			}
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "webpack",
    "watch": "webpack --watch",
    "package": "webpack --mode production --devtool hidden-source-map",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "npm run compile-tests && npm run compile && npm run lint",
    "lint": "eslint src",
    "test": "vscode-test"
  },
  "devDependencies": {
    "@types/vscode": "^1.105.0",
    "@types/mocha": "^10.0.10",
    "@types/node": "22.x",
    "@typescript-eslint/eslint-plugin": "^8.45.0",
    "@typescript-eslint/parser": "^8.45.0",
    "eslint": "^9.36.0",
    "typescript": "^5.9.3",
    "ts-loader": "^9.5.4",
    "webpack": "^5.102.0",
    "webpack-cli": "^6.0.1",
    "@vscode/test-cli": "^0.0.11",
    "@vscode/test-electron": "^2.5.2"
  }
}
